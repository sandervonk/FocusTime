let buttonClicked=!1;auth.onAuthStateChanged(e=>{user&&!buttonClicked&&new Toast("You are already signed in!","default",1e3,"./img/icon/toast/info-unlocked-icon.svg","./app/")}),$("#raised-close").click(()=>{window&&window.history,window?window.location.href="./":new ErrorToast("Error","Unable to go back",3e3)}),$(document).keypress(function(e){13==e.which&&$("#signup").click()}),$(".input-pair input").on("change input click",function(){""!=$("#name-input").val()&&""!=$("#email-input").val()&&""!=$("#password-input").val()&&$("#age-input").prop("checked")&&$("#terms-input").prop("checked")?$("#signup").removeClass("disabled"):$("#signup").addClass("disabled")}),$("#signup").click(()=>{buttonClicked=!0;const e=$("[data-auth-role='email-input']").val(),a=$("[data-auth-role='password-input']").val(),t=$("[data-auth-role='name']").val();e.length?a.length?t.length?$("[data-auth-role='age-check']").prop("checked")?$("[data-auth-role='agree-to-terms']").prop("checked")?auth.createUserWithEmailAndPassword(e,a).then(a=>{user=a.user,db.collection("users").doc(user.uid).set({name:t,email:e,uid:user.uid,created:firebase.firestore.Timestamp.now(),classes:{hist:"Social Studies",math:"Math",ele1:"Elective 1",ele2:"Elective 2",sci:"Science",engl:"English"}},{merge:!0}).then(()=>{new Toast("Account created!","default",1e3,"./img/icon/toast/info-unlocked-icon.svg","./app/"),window.location.href="/FocusTime/app/"}).catch(e=>{new ErrorToast("Error",cleanError(e),2e3)})}).catch(n=>{"auth/email-already-in-use"==n.code?auth.signInWithEmailAndPassword(e,a).then(a=>{user=a.user,db.collection("users").doc(user.uid).get().then(a=>{a.exists?new Toast("Account already exists and password matched, signed in","default",3e3,"./img/icon/toast/success-icon.svg","./app/"):db.collection("users").doc(user.uid).set({name:t,email:e,uid:user.uid,created:firebase.firestore.Timestamp.now()},{merge:!0}).then(()=>{new Toast("Signed in and created missing userdoc","default",3e3,"./img/icon/toast/success-icon.svg","./app/")}).catch(e=>{new ErrorToast("Error creating missing userdoc",cleanError(e),2e3)})})}).catch(e=>{new ErrorToast("Account already exists but could not log in:",cleanError(e),2e3)}):new ErrorToast("Error creating account",cleanError(n),2e3)}):new WarningToast("You must agree to the terms of service to continue",3e3):new WarningToast("You must be at least 13 years of age to continue",3e3):new WarningToast("Please enter a name.",3e3):new WarningToast("Please enter a password.",3e3):new WarningToast("Please enter a email.",3e3)}),$("#raised-content.raise-class").off();